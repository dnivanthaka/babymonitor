<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>The best baby monitor</title>
<style type="text/css">
body{
	padding: 0;
	margin: 0;
}
#bodyContainer{
	width: 380px;
	margin: 0 auto;
	/*border: 1px solid #000;*/
}

#streamContainer img{
	/*padding: 2px;*/
	display: block;
	margin: 0 auto;
	border: 2px solid red;
}

#streamContainer{
	width: 100%;
	margin: 0 auto;
	/*border: 1px solid #000;*/
}

#mainControl{
	width: 80%;
	margin:0 auto;
}

#eventStream{
	padding: 2px;
}
</style>
<script type="text/javascript">
	window.onload = function(){
		//alert("It works!!!");
	}

function sendCommand(cmd){

var url = "cgi-bin/control.cgi?state=";

if(cmd == 'shutdown' || cmd == 'reboot'){
	if(!confirm('Are you sure you want to '+cmd+'?')){
		return;
	}
}

if(cmd == 'restart_service'){
	url += "1";
}else if(cmd == 'reboot'){
	url += "2";
}else if(cmd == 'shutdown'){
	url += "3";
}

var req = new XMLHttpRequest();
req.open("GET", url, true);
req.send(null);


if(cmd == 'restart_service'){
	document.getElementById('mainControl').style = 'display:none';
	document.getElementById('serviceWaitMessage').style = 'display:block';
	setTimeout(function(){window.location='../index.html'}, 6000);	
}else if(cmd == 'reboot'){
	document.getElementById('mainControl').style = 'display:none';
	document.getElementById('waitMessage').style = 'display:block';
	setTimeout(function(){window.location='../index.html'}, 40000);
}else if(cmd == 'shutdown'){
	document.getElementById('mainControl').style = 'display:none';
	document.getElementById('shutdownMessage').style = 'display:block';
}

}
</script>
</head>

<body>
<div id="bodyContainer">
	<div id="mainControl">
		<a href="../index.html"><button type="button"><< Back</button></a>
		<button type="button" onclick="sendCommand('restart_service')">Restart Service</button>
		<button type="button" onclick="sendCommand('reboot')">Reboot</button>
		<button type="button" onclick="sendCommand('shutdown')">Shutdown</button>
	</div>
	<div id="serviceWaitMessage" style="display:none">
                <h2>Please Wait!!!</h2>
        </div>
	<div id="waitMessage" style="display:none">
		<h2>Device is restarting. Please Wait!!!</h2>
	</div>
	<div id="shutdownMessage" style="display:none">
                <h2>Device is shutting down!!!</h2>
        </div>

</div>
</body>
</html>
